schema: '2.0'
stages:
  clean_fire_data:
    cmd: python pipelines/clean_fire_data.py
    deps:
    - path: data/raw/cb_2023_us_state_20m.zip
      md5: ad8eda03e424bb59353c00b1b6398b07
      size: 186432
    - path: data/raw/fire_archive_SV-C2_607788.csv
      md5: 1da6e063f15a51119d2858af6656313e
      size: 490580970
    - path: pipelines/clean_fire_data.py
      hash: md5
      md5: 92ae172a9b206f33a0ea69cf9c4e3982
      size: 5452
    outs:
    - path: data/interim/fire_clean.csv
      md5: 9ed4fdad8330e39662396f999ea1a6cd
      size: 116624831
  preprocess_fire_data:
    cmd: python pipelines/preprocess_fire_data.py
    deps:
    - path: data/interim/fire_clean.csv
      md5: 9ed4fdad8330e39662396f999ea1a6cd
      size: 116624831
    - path: pipelines/preprocess_fire_data.py
      hash: md5
      md5: cd419e70ac7bbdb4f676040b7f7ea58c
      size: 11330
    outs:
    - path: data/processed/california_wildfires.csv
      hash: md5
      md5: 89a3656cb2c8382629c505ba3b101ef7
      size: 199229057
  clean_weather_data:
    cmd: python pipelines/clean_weather_data.py --all-years
    deps:
    - path: pipelines/clean_weather_data.py
      hash: md5
      md5: bec5a18dd9148358bb9de5cb92d82924
      size: 6840
    outs:
    - path: data/interim/weather_clean
      hash: md5
      md5: 99252488b4179859bcd12451f34daa75.dir
      size: 6749729368
      nfiles: 12
    - path: data/interim/weather_master.parquet
      hash: md5
      md5: 31587c160b82d0c97996a2398c4e4d16
      size: 1078174972
  merge_weather_fire:
    cmd: python pipelines/apply_merge_weather_fire.py
    deps:
    - path: data/interim/weather_features.parquet
      hash: md5
      md5: 32bdd89e20ef15ad6419923adfce52e2
      size: 8994410286
    - path: data/processed/california_wildfires.csv
      hash: md5
      md5: 89a3656cb2c8382629c505ba3b101ef7
      size: 199229057
    - path: pipelines/apply_merge_weather_fire.py
      hash: md5
      md5: c66182c9a2113df7c7765ea8eba682c6
      size: 4508
    outs:
    - path: data/processed/merged/merged_fire_weather.csv
      hash: md5
      md5: 51300b35f09681c051362c3e1b1e2f06
      size: 981123511
  feature_engineering_weather:
    cmd: python pipelines/apply_weather_features.py
    deps:
    - path: data/interim/weather_master.parquet
      hash: md5
      md5: 31587c160b82d0c97996a2398c4e4d16
      size: 1078174972
    - path: pipelines/apply_weather_features.py
      hash: md5
      md5: f1382d6969f865e0d11cc161f4893b5f
      size: 12405
    outs:
    - path: data/interim/weather_features.parquet
      hash: md5
      md5: 32bdd89e20ef15ad6419923adfce52e2
      size: 8994410286
