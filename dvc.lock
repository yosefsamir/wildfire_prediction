schema: '2.0'
stages:
  clean_fire_data:
    cmd: python pipelines/clean_fire_data.py
    deps:
    - path: data/raw/cb_2023_us_state_20m.zip
      md5: ad8eda03e424bb59353c00b1b6398b07
      size: 186432
    - path: data/raw/fire_archive_SV-C2_607788.csv
      md5: 1da6e063f15a51119d2858af6656313e
      size: 490580970
    - path: pipelines/clean_fire_data.py
      hash: md5
      md5: 2540033982ebf49dd167e05e6802572c
      size: 5586
    outs:
    - path: data/interim/fire_clean.csv
      md5: 9ed4fdad8330e39662396f999ea1a6cd
      size: 116624831
  preprocess_fire_data:
    cmd: python pipelines/preprocess_fire_data.py
    deps:
    - path: data/interim/fire_clean.csv
      md5: 9ed4fdad8330e39662396f999ea1a6cd
      size: 116624831
    - path: pipelines/preprocess_fire_data.py
      hash: md5
      md5: d6d97a3c4975d8ceb70695a4b7ed37ee
      size: 11588
    outs:
    - path: data/processed/california_wildfires.csv
      hash: md5
      md5: 0c064781c75e71ec93b042d02960eca4
      size: 199230032
  clean_weather_data:
    cmd: python pipelines/clean_weather_data.py --all-years
    deps:
    - path: pipelines/clean_weather_data.py
      hash: md5
      md5: bec5a18dd9148358bb9de5cb92d82924
      size: 6840
    outs:
    - path: data/interim/weather_clean
      hash: md5
      md5: 99252488b4179859bcd12451f34daa75.dir
      size: 6749729368
      nfiles: 12
    - path: data/interim/weather_master.parquet
      hash: md5
      md5: dfe670ac4757e4c310cab6b12c3c4403
      size: 41277412
  merge_weather_fire:
    cmd: python pipelines/apply_merge_weather_fire.py
    deps:
    - path: data/interim/weather_features.parquet
      hash: md5
      md5: c63d479bc0f937f11ec76577c90f0567
      size: 6653243453
    - path: data/processed/california_wildfires.csv
      hash: md5
      md5: 7ac12543449763e6b802edd0b8a5d12b
      size: 199228450
    - path: pipelines/apply_merge_weather_fire.py
      hash: md5
      md5: c56586cbf5de73cc6831e5dc6191bc7c
      size: 4525
    outs:
    - path: data/processed/merged/merged_fire_weather.csv
      hash: md5
      md5: 2902366b09224fdf612dc26afd3bfee1
      size: 866282110
  feature_engineering_weather:
    cmd: python pipelines/apply_weather_features.py
    deps:
    - path: data/interim/weather_master.parquet
      hash: md5
      md5: 31587c160b82d0c97996a2398c4e4d16
      size: 1078174972
    - path: pipelines/apply_weather_features.py
      hash: md5
      md5: f1382d6969f865e0d11cc161f4893b5f
      size: 12405
    outs:
    - path: data/interim/weather_features.parquet
      hash: md5
      md5: 6aaa68f2f1d52caffd953a4fc9ace7cb
      size: 8602277901
